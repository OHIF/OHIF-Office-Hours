# OHIF Office Hours Notes 2025-09-16

## Q & A

attendees: 5

## One-line summaries
- üè∑Ô∏è How to save segmentation labels in OHIF and export them to Orthanc or PACS.  
- üß© Availability of NIfTI support in OHIF vs Cornerstone.  
- üñºÔ∏è Troubleshooting blank screen when loading DICOMs in Cornerstone 3D 3.x.  
- üîó Adding custom URL buttons in OHIF study list or viewer to link to external applications.  


## Questions
üè∑Ô∏è **How to save the label?**
- By "labels," the team clarified that this refers to saving measurements or segmentations made in OHIF.
- OHIF does not allow saving directly to their servers, but if running locally, users can save/export.
- When using Orthanc as the backend server:
  - Create a segmentation in OHIF.
  - Use the **Download and Export** option:
    - *Download* saves locally to the computer.
    - *Export* pushes it back to Orthanc as a DICOM SEG.
- Once exported, refreshing the viewer will show the saved segmentation in the study list for later loading.
- If custom software produces labels (e.g., binary bitmaps), the recommended approach is to convert them into DICOM SEG files instead of trying to integrate a custom format into OHIF.
- Suggested tools:
  - [highdicom](https://github.com/ImagingDataCommons/highdicom) ‚Äì Python library for handling DICOM SEG creation.
  - [pydicom](https://github.com/pydicom/pydicom) ‚Äì for reading/writing DICOM files.
- Example workflow: Take a NumPy array ‚Üí provide CT reference metadata ‚Üí generate a DICOM SEG file ‚Üí push to PACS/Orthanc ‚Üí OHIF can display it.

---

üß© **Nifti support in OHIF**  
https://www.cornerstonejs.org/docs/examples  
https://www.cornerstonejs.org/live-examples/niftiwithtools  
https://github.com/ImagingDataCommons/highdicom  
https://github.com/pydicom/pydicom
- NIfTI is **not supported in OHIF directly**, but it is supported in **Cornerstone** (the underlying rendering library).
- Cornerstone has working examples of NIfTI loading, window leveling, and segmentation (see links above).
- OHIF is a UI and data layer built around Cornerstone, but not all Cornerstone features are immediately available in OHIF.
- Cornerstone usually gets new features first; later they are integrated into OHIF after UI/UX considerations, design, and testing.
- NIfTI support is **not currently on the OHIF roadmap** (as of version 3.12, targeted for Q4 2025). Current priorities are contour editing tools.
- Users who need NIfTI can integrate Cornerstone‚Äôs NIfTI loader themselves and contribute back to open source.

---

üñºÔ∏è **When I try to load dicom images using the cornerstone 3d 3.x version I only see a blank screen. No matter what I do I am unable to tackle it. Earlier I was using the 1.8 version and it was working fine.**
- This is likely a regression: if it worked in 1.8 but not in 3.x, something broke.
- Recommendation:
  - Create an issue on the Cornerstone GitHub.
  - Provide an anonymized DICOM sample that demonstrates the problem.
  - Mention that it worked in 1.8 and fails in 3.x to help developers reproduce and fix it.
- Without sample data, it is hard to troubleshoot because many changes exist between versions.

---

üîó **We'd like to insert a graphical element in the web view that is essentially a link with a custom URL format, one link for each series. The idea is that the link will open a custom app, and part of the URL contains an identifier that lets the app know which series we were interested in. how difficult is this, where would we start?**
- This is feasible: essentially adding a button in the OHIF UI that opens a custom URL with series/study identifiers.
- Implementation details:
  - OHIF uses **React.js** (currently React 18).
  - Use OHIF‚Äôs **extension mechanisms** to add a button linked to a command.
  - The command can fetch the study/series UID from the current context and build the custom URL.
  - Example: `myApp://seriesUID=12345`
- Location in code:
  - For study list: `UI source ‚Üí components ‚Üí StudyListTable ‚Üí StudyListTableRow.tsx`
  - Adding a button there allows per-study or per-series links.
  - Example insertion: add `<button onClick={() => window.open(customURL)} />`.
- Tools:
  - Chrome React Developer Tools helps inspect and locate components.
- Iteration:
  - Run OHIF in dev mode with `yarn run dev` instead of doing full rebuilds for faster development.
- Community support:
  - Developers are encouraged to join the OHIF Slack channel for collaboration and quicker answers.


